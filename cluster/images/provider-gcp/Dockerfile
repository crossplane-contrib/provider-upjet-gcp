FROM alpine:3.20.1
RUN apk --no-cache add ca-certificates bash

ARG TARGETOS
ARG TARGETARCH
ARG CROSSPLANE_PROVIDER_VERSION

ENV USER_ID=65532
# set user agent
ENV GOOGLE_TERRAFORM_USERAGENT_EXTENSION "upbound-provider-gcp/${CROSSPLANE_PROVIDER_VERSION}"

USER ${USER_ID}
EXPOSE 8080

ENTRYPOINT ["provider"]